(()=>{function e(i){i.directive("query",(o,{value:n,expression:s},{Alpine:u,evaluate:a})=>{let t=a(s);u.store("query-"+n,{fn:t.fn||null,runOnMount:t.runOnMount||!1,executeCount:0,status:"stall",data:null,onSuccess:t.onSuccess||null,onFailure:t.onFailure||null,onSettled:t.onSettled||null,init(){this.runOnMount&&this.execute()},async execute(){this.executeCount++,this.status=this.executeCount==1?"executing-first":"executing";try{this.data=await this.fn(),this.status="success",this.onSuccess&&await this.onSuccess(this.data)}catch{this.status="failure",this.onFailure&&await this.onFailure(this.data)}this.onSettled&&await this.onSettled(this.status,this.data)}})})}document.addEventListener("alpine:init",()=>window.Alpine.plugin(e));})();
